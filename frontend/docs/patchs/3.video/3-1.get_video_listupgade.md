# PATCH REQUEST â€” FRONTEND Phase 3-1 Video List Upgrade (Features & UX)

**SUMMARY**:
ê¸°ë³¸ì ì¸ ì˜ìƒ ëª©ë¡ ì¡°íšŒ(Phase 3-1)ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.
ì´ì œ ë°±ì—”ë“œ APIê°€ ì§€ì›í•˜ëŠ” **ê²€ìƒ‰(Search), í•„í„°ë§(Filter), ì •ë ¬(Sort)** ê¸°ëŠ¥ì„ UIì— ì—°ë™í•˜ê³ , **ë°ì´í„° í”„ë¦¬í˜ì¹­(Prefetching)**ì„ í†µí•´ ì²´ê° ì†ë„ë¥¼ ê°œì„ í•©ë‹ˆë‹¤.

---

## 1. ğŸš€ Feature Upgrades (ê¸°ëŠ¥ ê³ ë„í™”)

### A. Search & Filter Bar Integration
- **í˜„ì¬ ìƒíƒœ**: ë‹¨ìˆœíˆ `page`, `per_page`ë§Œ ì‚¬ìš©í•˜ì—¬ ì „ì²´ ëª©ë¡ì„ ì¡°íšŒ ì¤‘.
- **ì—…ê·¸ë ˆì´ë“œ ëª©í‘œ**: `VideoListReq`ì— ì •ì˜ëœ íŒŒë¼ë¯¸í„°(`q`, `lang`, `sort`)ë¥¼ í™œìš©.
- **êµ¬í˜„ ëª…ì„¸**:
  1.  **Component**: `src/category/video/components/video_filter_bar.tsx` ìƒì„±.
  2.  **Search Input**: ê²€ìƒ‰ì–´ ì…ë ¥ ì‹œ `Debounce`(ì•½ 300ms) ì²˜ë¦¬í•˜ì—¬ `q` íŒŒë¼ë¯¸í„° ì—…ë°ì´íŠ¸.
  3.  **Language Select**: 'ì „ì²´', 'í•œêµ­ì–´(ko)', 'ì˜ì–´(en)', 'ë‹¤êµ­ì–´(multi)' í•„í„° ë“œë¡­ë‹¤ìš´.
  4.  **Sort Select**: 'ìµœì‹ ìˆœ(latest)', 'ì¡°íšŒìˆ˜ìˆœ(view_count)', 'ì˜¤ë˜ëœìˆœ(oldest)' ì •ë ¬ ì˜µì…˜.

### B. React Query Prefetching (ì†ë„ ê°œì„ )
- **í˜„ì¬ ìƒíƒœ**: ë‹¤ìŒ í˜ì´ì§€ ë²„íŠ¼ í´ë¦­ ì‹œ ë¡œë”© ìŠ¤í”¼ë„ˆê°€ ëŒë©° ë°ì´í„°ë¥¼ ê°€ì ¸ì˜´.
- **ì—…ê·¸ë ˆì´ë“œ ëª©í‘œ**: ì‚¬ìš©ìê°€ í˜„ì¬ í˜ì´ì§€ë¥¼ ë³´ëŠ” ë™ì•ˆ **ë‹¤ìŒ í˜ì´ì§€ ë°ì´í„°ë¥¼ ë¯¸ë¦¬ ê°€ì ¸ì™€(Prefetch)** í´ë¦­ ì¦‰ì‹œ í™”ë©´ ì „í™˜.
- **êµ¬í˜„ ëª…ì„¸**:
  - `useVideoList` í›… ë‚´ë¶€ì— `queryClient.prefetchQuery` ë¡œì§ ì¶”ê°€.
  - `useEffect`ë¥¼ ì‚¬ìš©í•˜ì—¬ `page + 1`ì— ëŒ€í•œ ì¿¼ë¦¬ ì‹¤í–‰.
  - `placeholderData: keepPreviousData` ì˜µì…˜ ì‚¬ìš©ìœ¼ë¡œ í˜ì´ì§• ì¤‘ ê¹œë¹¡ì„ ë°©ì§€.

---

## 2. ğŸ¨ UI/UX Polish (ë””ìì¸ ë° ê²½í—˜ ê°œì„ )

### A. Video Card Hover Effects
- **ëª©í‘œ**: ì‚¬ìš©ìê°€ í´ë¦­ ê°€ëŠ¥í•œ ì˜ìƒì„ì„ ëª…í™•íˆ ì¸ì§€í•˜ë„ë¡ ì‹œê°ì  í”¼ë“œë°± ê°•í™”.
- **êµ¬í˜„**:
  - ë§ˆìš°ìŠ¤ í˜¸ë²„(`hover`) ì‹œ ì¸ë„¤ì¼ ì–´ë‘ì›Œì§ + **ì¬ìƒ ì•„ì´ì½˜(Play Icon)** ì¤‘ì•™ í‘œì‹œ.
  - ì¹´ë“œ ì „ì²´ê°€ ì‚´ì§ ë– ì˜¤ë¥´ëŠ”(`translate-y`) ì• ë‹ˆë©”ì´ì…˜ ì ìš©.

### B. Skeleton Loading Upgrade
- **ëª©í‘œ**: ì‹¤ì œ ì½˜í…ì¸  ë ˆì´ì•„ì›ƒê³¼ ë” ìœ ì‚¬í•œ ìŠ¤ì¼ˆë ˆí†¤ ì ìš©ìœ¼ë¡œ ë¡œë”© ì²´ê° ì‹œê°„ ë‹¨ì¶•.
- **êµ¬í˜„**:
  - ê¸°ì¡´ ë‹¨ìˆœ ì‚¬ê°í˜• ìŠ¤ì¼ˆë ˆí†¤ì„ `VideoCard` êµ¬ì¡°(ì¸ë„¤ì¼, ì œëª©, ë°°ì§€ ìœ„ì¹˜)ì™€ ë™ì¼í•˜ê²Œ ì„¸ë¶„í™”.

### C. Error Boundary & Retry UI
- **ëª©í‘œ**: ì¼ì‹œì  ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ ì‹œ ì „ì²´ í™”ë©´ì´ ê¹¨ì§€ëŠ” ëŒ€ì‹  "ì¬ì‹œë„ ë²„íŠ¼" ì œê³µ.
- **êµ¬í˜„**:
  - ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨ ì‹œ "ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. [ìƒˆë¡œê³ ì¹¨]" UI í‘œì‹œ.

---

## 3. ğŸ“ Implementation Guide (Code Snippets)

### Step 1. Filter State Management (`use_video_list.ts` or local state)
```typescript
// ê²€ìƒ‰ íŒŒë¼ë¯¸í„° ê´€ë¦¬ ì˜ˆì‹œ
const [filter, setFilter] = useState({
  q: "",
  lang: "all",
  sort: "latest"
});

// useVideoList í›…ì— íŒŒë¼ë¯¸í„° ì „ë‹¬
const { data } = useVideoList({
  page,
  per_page: 9,
  q: filter.q,
  lang: filter.lang === "all" ? undefined : filter.lang,
  sort: filter.sort
});
```

### Step 2. Prefetching Logic (`VideoListPage` useEffect)
```typescript
// ë‹¤ìŒ í˜ì´ì§€ ë¯¸ë¦¬ ê°€ì ¸ì˜¤ê¸°
useEffect(() => {
  if (!isPlaceholderData && hasNext) {
    queryClient.prefetchQuery({
      queryKey: ["videos", page + 1, filter],
      queryFn: () => getVideoList({ ...params, page: page + 1 }),
    });
  }
}, [page, isPlaceholderData, hasNext, queryClient, params]);
```

### Step 3. Updated Dependencies
```bash
# í•„í„°ë§ ì•„ì´ì½˜ ë° UI ìš”ì†Œ ì¶”ê°€ í•„ìš” ì‹œ
npx shadcn@latest add select input
```

---

## 4. âœ… Definition of Done (Upgrade)
1.  [ ] ê²€ìƒ‰ì°½ì— í‚¤ì›Œë“œ ì…ë ¥ ì‹œ ì˜ìƒ ëª©ë¡ì´ í•„í„°ë§ë˜ëŠ”ê°€?
2.  [ ] ì •ë ¬ ì¡°ê±´(ìµœì‹ ìˆœ/ì¡°íšŒìˆ˜ìˆœ) ë³€ê²½ ì‹œ ëª©ë¡ ìˆœì„œê°€ ë°”ë€ŒëŠ”ê°€?
3.  [ ] ë‹¤ìŒ í˜ì´ì§€ í´ë¦­ ì‹œ ë¡œë”© ì—†ì´ ì¦‰ì‹œ ì „í™˜ë˜ëŠ”ê°€? (Prefetching)
4.  [ ] ì¹´ë“œ í˜¸ë²„ ì‹œ ì¬ìƒ ì•„ì´ì½˜ì´ ëœ¨ëŠ”ê°€?