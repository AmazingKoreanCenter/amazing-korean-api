# PATCH REQUEST â€” FRONTEND Phase 3-2 Get Video Detail & Player

**ROLE**:
- ë‹¹ì‹ ì€ **Amazing Korean APIì˜ í”„ë¡ íŠ¸ì—”ë“œ ì „ë‹´ AI ì—ì´ì „íŠ¸**ì…ë‹ˆë‹¤.
- **Tech Stack**: React (Vite), TypeScript, Tailwind CSS, Shadcn/ui, TanStack Query, React Player.
- **AGENTS.md** ë° **LLM_PATCHS_TEMPLATE_FRONTEND.md** ê·œì¹™ì„ ì¤€ìˆ˜í•©ë‹ˆë‹¤.

**OBJECTIVE**:
- **ì˜ìƒ ìƒì„¸ í˜ì´ì§€(`/videos/:videoId`)**ë¥¼ êµ¬í˜„í•˜ê³ , Vimeo í”Œë ˆì´ì–´ë¥¼ ì—°ë™í•˜ì—¬ ì˜ìƒì„ ì¬ìƒí•©ë‹ˆë‹¤.
- **í•µì‹¬ ëª©í‘œ**: `VideoDetail` ë°ì´í„°ë¥¼ ì¡°íšŒí•˜ì—¬ í”Œë ˆì´ì–´ì— ë°”ì¸ë”©í•˜ê³ , ì—†ëŠ” ID ì ‘ê·¼ ì‹œ **404 Error UI**ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤.

**MCP ACTIONS (í•„ìˆ˜ ìˆ˜í–‰)**:
1.  **Read Types**: `src/category/video/types.ts`ë¥¼ ì½ì–´ ê¸°ì¡´ `VideoListItem` ì¸í„°í˜ì´ìŠ¤ë¥¼ í™•ì¸í•˜ì‹­ì‹œì˜¤.
2.  **Append Interface**: ê¸°ì¡´ íŒŒì¼ì„ ë®ì–´ì“°ì§€ ë§ê³ , íŒŒì¼ **ë§¨ í•˜ë‹¨ì—** ì•„ë˜ **DATA SPEC**ì˜ `VideoTag`, `VideoDetail` ì¸í„°í˜ì´ìŠ¤ë¥¼ **ì¶”ê°€(Append)** í•˜ì‹­ì‹œì˜¤.

**DATA SPEC (Strict SSOT)**:
- **Target**: `src/category/video/types.ts` (í•˜ë‹¨ ì¶”ê°€)
- **Rule**: ì—†ëŠ” ì»¬ëŸ¼ì„ ì¶”ì¸¡í•´ì„œ ë§Œë“¤ì§€ ë§ˆì‹­ì‹œì˜¤. Zod ìŠ¤í‚¤ë§ˆ(`videoDetailResSchema`)ì™€ Phase 3-1ì˜ `VideoListItem`ì„ ì°¸ê³ í•œ í™•ì •ëœ ìŠ¤í™ì…ë‹ˆë‹¤.

```typescript
// [Phase 3-2] ìƒì„¸ ì¡°íšŒìš© ì¸í„°í˜ì´ìŠ¤ (íŒŒì¼ í•˜ë‹¨ì— ì¶”ê°€)
export interface VideoTag {
  key: string | null;
  title: string | null;
  subtitle: string | null;
}

export interface VideoDetail {
  video_id: number;
  title: string | null;          // Listì™€ ë™ì¼í•˜ê²Œ ìœ ì§€
  subtitle: string | null;       // description ëŒ€ì‹  subtitle
  video_url_vimeo: string;       // Vimeo URL (í•„ìˆ˜)
  video_state: string;           // active ë“± ìƒíƒœê°’
  tags: VideoTag[];              // íƒœê·¸ ë°°ì—´
  created_at: string;
  // duration_seconds ë“±ì€ ìƒì„¸ ì •ë³´ì— ì—†ì„ ê²½ìš° VideoListItem ìºì‹œ í™œìš© ê³ ë ¤, ì¼ë‹¨ Response ìœ„ì£¼ ì •ì˜
}
```

**STATE MANAGEMENT (Context)**:
- **Page State**:
  - `init`: ë¡œë”© ìŠ¤ì¼ˆë ˆí†¤ í‘œì‹œ.
  - `ready`: ë°ì´í„° ë¡œë“œ ì™„ë£Œ í›„ í”Œë ˆì´ì–´ ë Œë”ë§.
- **Data State**:
  - `present` (200): ì •ìƒ ë Œë”ë§.
  - `error` (404/500): "ì˜ìƒì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤" ë˜ëŠ” "ì„œë²„ ì˜¤ë¥˜" ì—ëŸ¬ í˜ì´ì§€/í† ìŠ¤íŠ¸ í‘œì‹œ.

**IMPLEMENTATION STEPS (Strict Process)**:
1.  **Step 1. Types Update**:
    - `src/category/video/types.ts` í•˜ë‹¨ì— ìœ„ `VideoTag`, `VideoDetail` ì¸í„°í˜ì´ìŠ¤ ì¶”ê°€.
2.  **Step 2. API & Hook**:
    - `src/category/video/video_api.ts`: `getVideoDetail(id: number)` í•¨ìˆ˜ ì¶”ê°€. (GET `/videos/:id`)
    - `src/category/video/hook/use_video_detail.ts`: `useQuery` êµ¬í˜„.
        - **Query Key**: `["videos", "detail", id]`
        - **Retry**: 404 ì—ëŸ¬ì¸ ê²½ìš° `retry: false` ì„¤ì • (ì—†ëŠ” ì˜ìƒì€ ì¬ì‹œë„ ë¶ˆí•„ìš”).
3.  **Step 3. UI Component (Player)**:
    - `src/category/video/components/video_player.tsx`:
        - `react-player` ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš©.
        - Props: `url` (vimeo url), `onEnded` (ì˜ìƒ ì¢…ë£Œ ì‹œê·¸ë„ - í–¥í›„ progress ì—°ë™ìš©).
        - **ìŠ¤íƒ€ì¼**: `aspect-ratio`ë¥¼ ì‚¬ìš©í•˜ì—¬ 16:9 ë¹„ìœ¨ ìœ ì§€, ë°˜ì‘í˜• ì²˜ë¦¬.
4.  **Step 4. Page Implementation**:
    - `src/category/video/page/video_detail_page.tsx`:
        - `useParams`ë¡œ `videoId` íšë“.
        - **ë°©ì–´ ì½”ë“œ**: `id`ê°€ ìˆ«ìê°€ ì•„ë‹ˆê±°ë‚˜ `NaN`ì´ë©´ ëª©ë¡ìœ¼ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸(`Maps`).
        - **Layout**: ìƒë‹¨ í”Œë ˆì´ì–´, í•˜ë‹¨ ë©”íƒ€ ì •ë³´(ì œëª©, ì„œë¸Œíƒ€ì´í‹€, íƒœê·¸ ë°°ì§€).
        - **Error Handling**: `isError`ì¼ ë•Œ "ì˜ìƒì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤" UI í‘œì‹œ ë° "ëª©ë¡ìœ¼ë¡œ" ë²„íŠ¼ ì œê³µ.
5.  **Step 5. Routing**:
    - `src/app/routes.tsx`ì— `<Route path="/videos/:videoId" element={<VideoDetailPage />} />` ì¶”ê°€.

**PATCH RULES (Iron Rules)**:
1.  **ğŸš« No Overwrite**: `types.ts`ë¥¼ ì ˆëŒ€ ë®ì–´ì“°ì§€ ë§ˆì‹­ì‹œì˜¤. í•„ìš”í•œ ì¸í„°í˜ì´ìŠ¤ë§Œ `export`ë¡œ **ì¶”ê°€**í•˜ì‹­ì‹œì˜¤.
2.  **ğŸš« No Hallucinations**: `view_count`, `uploader` ë“± í™•ì •ë˜ì§€ ì•Šì€ í•„ë“œëŠ” ì‚¬ìš©í•˜ì§€ ë§ˆì‹­ì‹œì˜¤.
3.  **ğŸ“¦ Dependency**: `react-player` ì„¤ì¹˜ ëª…ë ¹ì–´ë¥¼ í¬í•¨í•˜ì‹­ì‹œì˜¤.

**OUTPUT FORMAT**:

**PREREQUISITES**:
```bash
npm install react-player
```

// FILE: src/category/video/types.ts
(Append Mode: ê¸°ì¡´ ë‚´ìš© ìœ ì§€, í•˜ë‹¨ì— ì¶”ê°€)

// FILE: src/category/video/video_api.ts

// FILE: src/category/video/hook/use_video_detail.ts

// FILE: src/category/video/components/video_player.tsx

// FILE: src/category/video/page/video_detail_page.tsx

// FILE: src/app/routes.tsx