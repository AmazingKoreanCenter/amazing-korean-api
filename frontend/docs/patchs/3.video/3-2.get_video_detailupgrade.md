# Phase 3-2 Upgrade Plan: Future Roadmap & Optimizations

## 📅 작성일: 2026-01-15
## 🎯 목적
현재 Phase 3-2에서 구축한 비디오 플레이어 및 상세 조회 기능을 바탕으로, 향후 서비스의 품질과 학습 경험을 극대화하기 위해 **앞으로 적용해야 할 기술적 개선 사항과 기능 확장 계획**을 정의함.

---

## 🚀 1. Advanced Progress Tracking (정밀 진도율 추적)

### 🔻 현재 상태 (As-Is)
- 단순히 영상이 끝났을 때(`onEnded`)만 100% 완료로 처리함.
- 사용자가 중간에 나가면 어디까지 봤는지 기록되지 않음.

### ⭐ 업그레이드 계획 (To-Be)
1.  **이어보기 기능 (Resume Capability):**
    - `@vimeo/player`의 `timeupdate` 이벤트를 사용하여 5초~10초 단위로 시청 시간을 서버에 전송.
    - 재접속 시 해당 시간부터 자동 재생 (`player.setCurrentTime()`).
2.  **구간별 진도율:**
    - 전체 길이의 90% 이상 시청 시 '완료' 처리 등 유연한 로직 도입.

```typescript
// [Future Code] 이어보기 및 구간 기록 예시
player.on('timeupdate', (data) => {
  // 10초마다 현재 위치 저장 (Throttling 필요)
  if (Math.floor(data.seconds) % 10 === 0) {
    saveProgress(videoId, data.seconds, data.percent);
  }
});
```

---

## 🎬 2. Player UX/UI Enhancement (사용자 경험 개선)

### 🔻 현재 상태 (As-Is)
- Vimeo 기본 컨트롤러(재생바, 볼륨 등)를 그대로 사용 중.
- 다음 강의로 넘어가는 자동 기능 부재.

### ⭐ 업그레이드 계획 (To-Be)
1.  **Auto-Play Next (자동 넘김):**
    - 영상 종료(`ended`) 이벤트 발생 시, 5초 카운트다운 후 다음 `videoId`로 자동 라우팅.
2.  **Custom Overlay Controls:**
    - Vimeo 기본 UI를 숨기고(`controls=false`), 우리 디자인 시스템(Shadcn UI)에 맞춘 커스텀 재생/정지 버튼 및 진행바 오버레이 구현.
3.  **Keyboard Shortcuts:**
    - 스페이스바(재생/정지), 화살표(10초 이동) 등 키보드 접근성 강화.

---

## 🛠️ 3. Admin & Data Automation (운영 자동화)

### 🔻 현재 상태 (As-Is)
- 관리자가 Vimeo에 영상을 올린 후, ID와 썸네일 URL을 DB에 **수동으로 입력**해야 함.
- 사람의 실수로 인한 ID 불일치(403 에러) 발생 위험 존재.

### ⭐ 업그레이드 계획 (To-Be)
1.  **Vimeo API Integration:**
    - 백엔드에서 Vimeo API를 연동하여, Vimeo 영상 ID만 입력하면 **제목, 썸네일, 재생 시간(Duration)을 자동으로 긁어와 DB에 저장**하는 기능 구현.
2.  **Status Sync:**
    - Vimeo에서 영상을 삭제하거나 비공개로 전환하면, 우리 DB의 `video_state`도 자동으로 동기화되는 Webhook 구축.

---

## ⚡ 4. Performance & Caching (성능 최적화)

### 🔻 현재 상태 (As-Is)
- 상세 페이지 진입 시마다 API를 호출하여 데이터를 가져옴.
- 영상 로딩 전까지 Skeleton UI 의존.

### ⭐ 업그레이드 계획 (To-Be)
1.  **Prefetching (미리 불러오기):**
    - 비디오 목록 페이지에서 사용자가 썸네일에 마우스를 올리면(Hover), 해당 상세 페이지 데이터를 미리 로드(Prefetch)하여 클릭 시 즉시 렌더링.
2.  **React Query Caching:**
    - `staleTime`을 조정하여, 뒤로 가기 후 다시 들어왔을 때 API 재호출 없이 캐시된 데이터 사용.

---

## 📝 결론
Phase 3-2는 "재생 가능한 상태"를 만드는 기초 작업이었으며, 추후 위 4가지 영역(진도율, UX, 운영 자동화, 성능)의 업그레이드를 통해 **상용 수준의 LMS(Learning Management System)** 로 발전시켜야 함.