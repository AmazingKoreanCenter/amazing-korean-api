# Phase 3-2 Issue Log: Video Detail & Player Implementation

## π“… κΈ°κ°„
- **μ‹μ‘:** Phase 3-2 μ§„μ… μ‹μ 
- **μΆ…λ£:** Vimeo ν”λ μ΄μ–΄ μ—°λ™ λ° μƒμ„Έ νμ΄μ§€ λΌμ°ν… μ •μƒν™” μ™„λ£

## π“ κ°μ”
λΉ„λ””μ¤ μƒμ„Έ μ •λ³΄λ¥Ό μ΅°νν•κ³  Vimeo μμƒμ„ μ¬μƒν•λ” κΈ°λ¥μ„ κµ¬ν„ν•λ” κ³Όμ •μ—μ„ λ°μƒν• μ΄μλ“¤κ³Ό ν•΄κ²°μ±…μ„ κΈ°λ΅ν•¨.
μ£Όλ΅ **TypeScript νƒ€μ… νΈν™μ„±**, **Vimeo λ³΄μ• μ •μ±… λ° λ°μ΄ν„° λ¬΄κ²°μ„±**, **Vite Proxy μ„¤μ • μ¶©λ**μ΄ μ£Όλ μ›μΈμ΄μ—μ.

---

## π› Issues & Resolutions

### 1. `react-player` TypeScript νΈν™μ„± λ¬Έμ 
- **ν„μƒ:**
  - `react-player` μ‚¬μ© μ‹ `Property 'url' does not exist` μ—λ¬ λ°μƒ.
  - `ComponentType` import μ‹ `verbatimModuleSyntax` μ—λ¬ λ°μƒ.
- **μ›μΈ:**
  - λΌμ΄λΈλ¬λ¦¬μ νƒ€μ… μ •μκ°€ μµμ‹  React/TypeScript μ—„κ²© λ¨λ“μ™€ μ¶©λ.
- **ν•΄κ²°:**
  - `BasePlayerProps` μΈν„°νμ΄μ¤λ¥Ό μ§μ ‘ μ •μν•μ—¬ ν•„μ”ν• Props(`url`, `controls`, `onEnded` λ“±)λ¥Ό λ…μ‹.
  - `Type Assertion`μ„ μ‚¬μ©ν•μ—¬ λΌμ΄λΈλ¬λ¦¬λ¥Ό κ°•μ λ΅ νΈν™ κ°€λ¥ν• νƒ€μ…μΌλ΅ λ³€ν™.

```typescript
const SafeReactPlayer = ReactPlayer as unknown as ComponentType<BasePlayerProps>;
```

### 2. Vimeo μμƒ μ¬μƒ μ‹¤ν¨ (Black Screen / 403 Forbidden)
- **ν„μƒ:**
  - ν”λ μ΄μ–΄ UIλ” λ΅λ“λλ‚ μμƒμ΄ κ²€μ€ ν™”λ©΄μΌλ΅ λ‚μ¤κ±°λ‚ `403 Forbidden` μ—λ¬ λ°μƒ.
- **μ›μΈ (λ³µν•©μ ):**
  1. **λ°μ΄ν„° μ¤μ—Ό:** DBμ— μ΅΄μ¬ν•μ§€ μ•λ” κ°€μ§ ID(`999...`)λ‚ λ¶ν•„μ”ν• νλΌλ―Έν„°(`?fl=tl...`)κ°€ ν¬ν•¨λ URLμ΄ μ €μ¥λ¨.
  2. **λ³΄μ• μ„¤μ •:** Vimeo μμƒ μ„¤μ •μ—μ„ μ„λ² λ“ ν—μ© λ„λ©”μΈμ— `localhost` λ° `127.0.0.1`μ΄ λ„λ½λ¨.
  3. **λΌμ΄λΈλ¬λ¦¬ ν•κ³„:** `react-player`κ°€ λ³΄μ• μ„¤μ •λ Private μμƒ(Embed restriction)μ„ ν•Έλ“¤λ§ν•λ” κ³Όμ •μ—μ„ κ°„ν—μ  μ¤λ¥ λ°μƒ.
- **ν•΄κ²°:**
  - **λ°μ΄ν„° μ •μ :** μ ν¨ν• μ‹¤μ  Vimeo ID(`1150...`)μ™€ νλΌλ―Έν„° μ—†λ” μμ URLλ΅ DB μ—…λ°μ΄νΈ.
  - **Vimeo μ„¤μ •:** `Manage Video > Embed` μ„¤μ •μ—μ„ `Specific domains`μ— `127.0.0.1:5173` λ“±λ΅.
  - **κµ¬μ΅° λ³€κ²½:** `react-player` μ κ±° ν›„ `iframe` νƒκ·Έ μ§μ ‘ μ‚¬μ© + `@vimeo/player` SDKλ¥Ό ν†µν•΄ μ΄λ²¤νΈ(`onEnded`) μ μ–΄ λ°©μ‹μΌλ΅ λ³€κ²½ν•μ—¬ μ•μ •μ„± ν™•λ³΄.

### 3. Vite Proxyμ™€ React Router μ¶©λ (Route Collision)
- **ν„μƒ:**
  - λΈλΌμ°μ € μ£Όμ†μ°½μ— `/videos` μ…λ ¥ μ‹, React νμ΄μ§€κ°€ μ•„λ‹ λ°±μ—”λ“μ JSON λ°μ΄ν„°κ°€ ν™”λ©΄μ— μ¶λ ¥λ¨.
- **μ›μΈ:**
  - `vite.config.ts`μ Proxy μ„¤μ •μ΄ `/videos` κ²½λ΅κΉμ§€ λ°±μ—”λ“λ΅ ν¬μ›λ”©ν•λ„λ΅ μ„¤μ •λμ–΄ μμ–΄, λΈλΌμ°μ €μ UI μ ‘κ·Ό μ”μ²­μ„ API μ”μ²­μΌλ΅ μ¤μΈν•¨.
- **ν•΄κ²°:**
  - **Proxy κ·μΉ™ μ¶•μ†:** μ¤μ§ `/api`λ΅ μ‹μ‘ν•λ” μ”μ²­λ§ λ°±μ—”λ“λ΅ λ³΄λ‚΄λ„λ΅ `vite.config.ts` μμ •.
  - **Client μμ •:** API μ”μ²­ μ‹ `baseURL`μ„ `/api`λ΅ ν†µμΌν•μ—¬ UI λΌμ°ν…κ³Ό API μ”μ²­μ„ λ…ν™•ν λ¶„λ¦¬.

```typescript
// vite.config.ts
proxy: {
  "/api": { target: "...", rewrite: (path) => path.replace(/^\/api/, "") }
}
```

### 4. κΈ°νƒ€ κ²½κ³  λ° μµμ ν™”
- **`allowfullscreen` κ²½κ³ :** `iframe`μ `allow` μ†μ„±κ³Ό μ¤‘λ³µλμ–΄ μ½μ†” κ²½κ³  λ°μƒ β†’ μ†μ„± μ κ±°λ΅ ν•΄κ²°.
- **API Response Type:** λ°±μ—”λ“ μ‘λ‹µκ³Ό ν”„λ΅ νΈμ—”λ“ μΈν„°νμ΄μ¤ κ°„ λ¶μΌμΉ μ΅°μ •.

---

## π’΅ Key Learnings (κµν›)

1.  **Data First:** κΈ°λ¥ κµ¬ν„ μ „, μ‚¬μ©ν•λ” λ°μ΄ν„°(URL, ID λ“±)κ°€ μ ν¨ν•μ§€ λ¨Όμ € κ²€μ¦(Hardcoding Test)ν•΄μ•Ό λ””λ²„κΉ… μ‹κ°„μ„ λ‹¨μ¶•ν•  μ μλ‹¤.
2.  **Platform Policy:** μ™Έλ¶€ μ„λΉ„μ¤(Vimeo, YouTube λ“±) μ—°λ™ μ‹, μ½”λ“ λ¬Έμ λ³΄λ‹¤ ν•΄λ‹Ή ν”λ«νΌμ λ³΄μ•/μ„λ² λ“ μ„¤μ •μ΄ μ›μΈμΌ ν™•λ¥ μ΄ λ†’λ‹¤.
3.  **Routing Separation:** SPA(Single Page App) κ°λ° μ‹, ν”„λ΅ νΈμ—”λ“ λΌμ°νΈμ™€ λ°±μ—”λ“ API κ²½λ΅λ” μ ‘λ‘μ–΄(`/api`) λ“±μ„ ν†µν•΄ λ¬Όλ¦¬μ μΌλ΅ κ²ΉμΉμ§€ μ•κ² μ„¤κ³„ν•΄μ•Ό ν•λ‹¤.

---

## β… Next Step
- **Phase 3-3:** ν•™μµ μ§„λ„μ¨(Progress) μ €μ¥ λ° μ™„λ£ μ²λ¦¬ κµ¬ν„ (`onEnded` μ΄λ²¤νΈ ν™μ©).