# 🚀 Backlog: User Settings Upgrade Plan (Phase 2-4+)

## 📋 개요
Phase 2-4(MVP)에서는 데이터 정합성을 위해 **명시적인 [저장] 버튼** 방식과 **DB 스키마(1:1 매핑)**를 준수하는 안정적인 폼을 구현했습니다.
다음 단계에서는 사용자 경험(UX)을 극대화하기 위해 **자동 저장**, **낙관적 업데이트**, 그리고 **테마 설정의 서버 동기화**를 목표로 합니다.

---

## 1. UX 고도화: 저장 버튼 없애기 (Invisible Save)

### ⚡ 자동 저장 (Auto-Save) & 디바운싱
- **현재**: 값을 바꾸고 반드시 [저장] 버튼을 클릭해야 함.
- **업그레이드**:
  - **Switch (알림 설정)**: 토글 즉시 API 요청 전송.
  - **Select (언어/타임존)**: 값 변경 즉시 API 요청 전송.
  - **Input (텍스트)**: `useDebounce` (500ms) 적용 후 자동 전송.
- **기술 스택**: `useEffect` + `watch` (React Hook Form) 조합 또는 `onChange` 핸들러 직접 연결.

### 🔮 낙관적 업데이트 (Optimistic Updates)
- **개념**: 서버 응답을 기다리지 않고, UI를 먼저 성공 상태로 바꾼 뒤 백그라운드에서 요청 처리. 실패 시에만 롤백.
- **효과**: 스위치를 누를 때 딜레이 없이 즉각 반응하여 네이티브 앱 같은 경험 제공.
- **구현**: React Query `onMutate` 활용.

---

## 2. 기능 확장: 제외된 기능 복구 및 강화

### 🌓 테마(Theme) 서버 동기화
- **상황**: 현재 `theme` 필드는 DB `users_setting` 테이블에 없어 API 전송에서 제외됨 (Local State로만 동작).
- **목표**: 사용자가 설정한 다크/라이트 모드가 기기를 변경해도 유지되어야 함.
- **Action**:
  - **Backend**: `users_setting` 테이블에 `user_set_theme` (VARCHAR) 컬럼 추가 요청.
  - **Frontend**: `types.ts`의 `SettingsUpdateReq`에 `user_set_theme` 추가 및 UI 연동.

### 🌍 스마트 타임존 (Smart Timezone)
- **현재**: 단순 텍스트(`Asia/Seoul`)로 표시되거나 선택이 불편함.
- **업그레이드**:
  - **Shadcn Combobox**: 수많은 타임존 중 검색 가능한 UI 제공.
  - **자동 감지**: 브라우저의 `Intl.DateTimeFormat().resolvedOptions().timeZone` 값과 DB 저장 값이 다를 경우, "현재 위치(런던)로 타임존을 변경하시겠습니까?" 팝업 제안.

---

## 3. 계정 관리 (Danger Zone)

### 🗑️ 회원 탈퇴 (Withdrawal)
- **위치**: 설정 페이지 최하단에 붉은색 섹션으로 배치.
- **프로세스**:
  1. 탈퇴 사유 선택 (옵션).
  2. "데이터가 영구 삭제됩니다" 경고 모달.
  3. 현재 비밀번호 입력 (재인증).
  4. `DELETE /users/me` 호출 -> 로그아웃 처리.

---

## 4. 실행 로드맵 (Roadmap)

| 우선순위 | 작업명 | 설명 | 난이도 |
| :--- | :--- | :--- | :--- |
| **Highest** | **자동 저장 (Auto-Save)** | 저장 버튼 제거 및 즉시 반영 UX | 🟡 Medium |
| **High** | 테마 서버 동기화 | DB 컬럼 추가 후 연동 (`user_set_theme`) | 🟡 Medium |
| **Mid** | 타임존 개선 | 검색 가능한 Combobox UI 및 자동 감지 | 🟢 Low |
| **Low** | 회원 탈퇴 | UI 및 보안 프로세스 구현 | 🔴 High |