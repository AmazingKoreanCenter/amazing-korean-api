# 🚀 Backlog: User Settings Upgrade Plan (Phase 2-3+)

## 📋 개요
Phase 2-3(MVP)에서는 설정값을 '조회(Read-Only)'하는 데 그쳤습니다.
다음 단계에서는 **설정값 변경(Update)** 기능을 구현하여 사용자의 선택을 서버에 저장하고, **`users_setting` 테이블의 숨겨진 필드들**까지 확장하여 명실상부한 설정 페이지를 완성합니다.

---

## 1. 설정 변경 기능 (Update Implementation)

### 💾 실시간 자동 저장 (Auto-Save UX)
- **현재**: 스위치를 눌러도 서버로 요청이 가지 않음.
- **업그레이드**:
  - **Toggle/Switch**: 클릭 즉시 `PATCH /users/me/settings` 요청 전송. (낙관적 업데이트 적용: UI 먼저 변경 -> 실패 시 롤백)
  - **Select/Input**: 값 변경 후 0.5초 딜레이(Debounce) 또는 포커스 아웃(Blur) 시 저장.
- **피드백**: 저장 성공 시 우측 하단에 조그만 "저장됨" 토스트 메시지 노출.

### 🔄 API 연동 (PUT/PATCH)
- **Endpoint**: `PATCH /users/me/settings`
- **Payload**: 변경된 필드만 부분 전송 (Partial Update).
  ```json
  { "is_email_marketing_agreed": false }
  ```

---

## 2. 설정 항목 확장 (Expand Fields)

### 🔔 알림 설정 (Notification Preferences)
- **추가 필드**:
  - `is_push_agreed` (Boolean): 앱 푸시 알림 수신 여부.
  - `notification_level` (Enum): 'ALL'(모두 받기) | 'IMPORTANT'(중요 공지반) | 'NONE'(안 받기).
- **UI**: 마케팅 정보 수신 동의 하단에 섹션 분리하여 배치.

### 🔒 프라이버시 및 보안 (Privacy & Security)
- **추가 필드**:
  - `is_profile_public` (Boolean): 내 프로필/활동 내역을 다른 사람에게 공개할지 여부.
  - `login_alert` (Boolean): 새로운 기기에서 로그인 시 이메일 알림 발송 여부.

### 🌍 지역 및 접근성 (Localization & A11y)
- **추가 필드**:
  - `timezone` (String): 예: 'Asia/Seoul'. 서버에서 스케줄링된 알림을 보낼 때 기준 시간으로 사용.
  - `font_size` (Enum): 'DEFAULT' | 'LARGE'. (노안이나 저시력자를 위한 UI 확대 옵션).

---

## 3. 시스템 연동 (System Integration)

### 🌓 테마 적용 (Real Theme Sync)
- **현재**: DB 값만 바꾸고 실제 앱 색상은 안 바뀜.
- **구현**: `UserSetting`의 `theme` 값이 변경되면, 프론트엔드의 `ThemeProvider`(Shadcn/Next-themes) 상태를 강제로 업데이트하여 즉시 다크/라이트 모드 전환.

### 🗣️ 다국어 적용 (i18n Sync)
- **구현**: `language` 값이 'en'으로 바뀌면, `i18next`의 언어 설정을 변경하여 앱 전체 텍스트를 영어로 전환.

---

## 4. 실행 로드맵 (Roadmap)

| 우선순위 | 작업명 | 설명 | 난이도 |
| :--- | :--- | :--- | :--- |
| **Highest** | **설정 변경(PATCH) 구현** | 스위치 토글 시 DB 업데이트 | 🟡 Medium |
| **High** | 테마/언어 실시간 반영 | 설정값에 따른 앱 스타일 변경 | 🟡 Medium |
| **Mid** | 알림/프라이버시 필드 추가 | DB 컬럼 추가 및 UI 확장 | 🟢 Low |
| **Low** | 접근성(폰트) 설정 | 전역 스타일 변수 제어 | 🔴 High |