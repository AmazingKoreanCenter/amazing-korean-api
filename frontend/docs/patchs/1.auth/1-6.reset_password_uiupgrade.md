# 🚀 Backlog: Reset Password System Upgrade Plan (Phase 1-6+)

## 📋 개요
Phase 1-6(MVP)는 "비밀번호를 분실한 사용자"가 이메일 토큰을 통해 들어오는 복구 프로세스에 집중했습니다.
다음 단계에서는 **로그인된 사용자의 변경 요청 처리**, **세션 보안 강화**, **어뷰징 방지**를 통해 인증 시스템의 완결성을 높입니다.

---

## 1. 접근성 및 시나리오 분리 (Access Context)

### 🔄 재설정(Reset) vs 변경(Change) 분리
- **현재**: `/reset-password`는 오직 이메일 토큰(`?token=...`)에 의존.
- **업데이트**:
  - **로그인된 사용자**: "내 정보(My Page)"에서 비밀번호 변경 시, 이메일 발송 없이 **"현재 비밀번호 + 새 비밀번호"** 입력 방식으로 처리하는 별도 API/UI 구현 (`POST /auth/change-pw`).
  - **링크 진입 시**: 이미 로그인된 상태에서 비밀번호 재설정 링크를 타고 들어오면, "보안을 위해 현재 세션을 로그아웃 하시겠습니까?" 묻고 로그아웃 후 진행.

---

## 2. 토큰 및 세션 보안 (Session & Token Security)

### 🔐 재설정 완료 후 자동 로그인/갱신 (Token Refresh)
- **사용자 요청**: 비밀번호 변경 성공 후 다시 로그인하는 번거로움 제거.
- **구현**:
  - API가 비밀번호 변경 성공 시 `Set-Cookie` 헤더로 **새로운 Refresh Token**을 즉시 발급.
  - 프론트엔드는 응답(200 OK)을 받으면 `useAuthStore.login()`을 호출해 즉시 로그인 상태로 전환.

### 💣 타 기기 강제 로그아웃 (Session Revocation)
- **보안 강화**: 해킹 의심으로 비밀번호를 바꾸는 경우, **"다른 모든 기기에서 로그아웃"** 옵션이 필수.
- **구현**:
  - UI에 체크박스 추가: `[v] 다른 모든 기기에서 로그아웃 합니다.`
  - 백엔드 전송 시 `{ revoke_others: true }` 플래그 전달.

---

## 3. 반복성 제어 및 어뷰징 방지 (Rate Limiting)

### ⏳ 쿨다운 타이머 (Cool-down Policy)
- **목적**: 비밀번호를 너무 자주 바꾸는 행위(서버 부하 및 계정 탈취 시도 방해) 방지.
- **정책**: "비밀번호 변경은 10분에 한 번만 가능합니다."
- **구현**:
  - **Backend**: 변경 직후 DB/Redis에 타임스탬프 기록. 10분 내 재요청 시 `429 Too Many Requests` + `Retry-After: 600` 반환.
  - **Frontend**: 429 에러 감지 시, "잠시 후 다시 시도해주세요 (남은 시간: MM:SS)" 카운트다운 UI 표시.

### 📜 이전 비밀번호 재사용 금지 (History Check)
- **정책**: 최근 사용한 비밀번호 2~3개는 재사용 불가.
- **UI**: 에러 메시지 "최근에 사용한 비밀번호와 동일합니다." 표시.

---

## 4. UX 및 입력 편의성 (UX Enhancements)

### 👁️ 비밀번호 표시 토글 (Toggle Visibility)
- **기능**: 입력한 비밀번호가 맞는지 눈으로 확인할 수 있도록 `Input` 우측에 "눈 모양 아이콘(Eye Icon)" 추가.
- **효과**: 오타로 인한 재설정 실패 및 스트레스 감소.

### 💪 실시간 강도 측정기 (Strength Meter)
- **기능**: 단순한 "6자 이상" 체크를 넘어, `zxcvbn` 같은 라이브러리로 비밀번호 안전도(약함/보통/강함)를 시각적(Bar Graph)으로 표시.
- **피드백**: "숫자와 특수문자를 섞어주세요" 같은 구체적 가이드 제공.

---

## 5. 실행 로드맵 (Roadmap)

| 우선순위 | 작업명 | 설명 | 난이도 |
| :--- | :--- | :--- | :--- |
| **High** | **비밀번호 변경(Change) 분리** | 로그인 유저용 마이페이지 기능 | 🟡 Medium |
| **High** | **타 기기 로그아웃 옵션** | 보안 필수 기능 | 🟡 Medium |
| **Mid** | 비밀번호 표시 토글 | UI 편의성 개선 | 🟢 Low |
| **Mid** | 10분 쿨다운 처리 | 429 에러 핸들링 및 타이머 | 🔴 High |
| **Low** | 실시간 강도 측정 | zxcvbn 라이브러리 연동 | 🟡 Medium |