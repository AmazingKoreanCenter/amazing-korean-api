# 🚀 Backlog: Logout UI & Logic Upgrade Plan (Phase 1-3+)

## 📋 개요
Phase 1-3(MVP) 로그아웃 기능의 **안전장치(Safety), 동기화(Sync), 자동화(Automation)**를 고도화하기 위한 과제 목록입니다.
단순히 세션을 끊는 것을 넘어, 사용자의 실수 방지와 다중 환경에서의 일관성을 확보하는 데 중점을 둡니다.

---

## 1. UX 안전장치 및 피드백 (Safety & Feedback)

### ✅ 로그아웃 확인 모달 (Confirmation Modal)
- **현재**: 버튼 클릭 즉시 로그아웃 실행. (실수로 눌렀을 때 불편함)
- **개선**:
  - `AlertDialog` (Shadcn) 컴포넌트를 띄워 **"정말 로그아웃 하시겠습니까?"** 확인.
  - "취소" 시 아무 일도 일어나지 않음.
- **Tech**: `src/category/auth/components/logout_button.tsx` 내부에 모달 로직 통합.

### 🔄 리다이렉트 전략 고도화 (Smart Redirect)
- **현재**: 무조건 `/login` 페이지로 이동.
- **개선**:
  - 로그아웃 후 **메인 페이지(`/`)**로 이동하여 게스트 모드로 둘러보게 유도할지, 로그인 페이지로 보낼지 기획적 결정 필요.
  - 또는 `Toast`에 "다시 로그인" 버튼을 제공하여 편의성 증대.

---

## 2. 브라우저 탭 간 동기화 (Multi-Tab Sync)

### 📡 탭 간 로그아웃 상태 전파 (Broadcast Channel)
- **시나리오**: 사용자가 브라우저 탭 A와 B를 열어둠 -> 탭 A에서 로그아웃 -> 탭 B는 여전히 로그인된 것처럼 보임 -> 탭 B에서 조작 시 401 에러 발생.
- **개선**:
  - **`BroadcastChannel` API** 또는 `window.addEventListener('storage')` 사용.
  - 한 탭에서 로그아웃 발생 시, **다른 모든 탭에서도 즉시 UI를 로그아웃 상태로 변경**하고 로그인 화면으로 튕겨냄.
- **Tech**: `useAuthStore` 내부 또는 `App.tsx`의 `useEffect`에서 이벤트 리스닝.

---

## 3. 보안 강화 (Security Automation)

### ⏱️ 유휴 시간 감지 자동 로그아웃 (Auto-Logout on Idle)
- **목적**: 공용 PC 등에서 사용자가 로그아웃을 깜빡했을 때 보안 사고 방지.
- **구현**:
  - 사용자의 마우스 이동, 키보드 입력, 클릭 이벤트가 `N`분(예: 30분) 동안 없으면 감지.
  - 타임아웃 발생 시 자동으로 `logout()` 함수 실행.
- **Tech**: `react-idle-timer` 라이브러리 또는 커스텀 훅(`useIdle`) 구현.

### 📱 모든 기기에서 로그아웃 옵션 (Logout All Devices)
- **목적**: 계정 해킹이 의심되거나 기기 분실 시, 현재 기기뿐만 아니라 **다른 모든 세션**을 종료.
- **UI**: 로그아웃 확인 모달 내에 `[ ] 모든 기기에서 로그아웃` 체크박스 제공.
- **API**: `POST /auth/logout` 요청 시 바디에 `{ everywhere: true }` 포함 (Phase 1-3 백엔드 DTO `LogoutAllReq` 활용).

---

## 4. 실행 로드맵 (Roadmap)

| 우선순위 | 작업명 | 필요 선행 작업 | 예상 난이도 |
| :--- | :--- | :--- | :--- |
| **High** | 탭 간 로그아웃 동기화 | BroadcastChannel 학습 | 🟡 Medium |
| **Mid** | 로그아웃 확인 모달 | Shadcn AlertDialog | 🟢 Low |
| **Mid** | 모든 기기 로그아웃 옵션 | Backend API (`everywhere`) | 🟡 Medium |
| **Low** | 유휴 시간 자동 로그아웃 | Idle Logic | 🟡 Medium |