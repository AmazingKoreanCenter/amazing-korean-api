# 📝 Phase 6-20 Admin Create Study Task - Issue & Troubleshooting Log

## 1. 프로세스 및 전략 (Process & Strategy)

### ✅ 전략적 순서 변경 (Critical Success Factor)
* **상황:** 원래 `PATCH`(수정)를 먼저 구현하려 했으나, 데이터 생성 수단이 없어 테스트가 불가능함을 조기에 감지.
* **결정:** 과감하게 순서를 바꿔 `POST`(생성)를 먼저 구현하기로 결정.
* **효과:**
    * 실제 DB에 데이터가 `INSERT` 되는 구조를 먼저 확립함.
    * 추후 구현할 `PATCH` 로직에서 테이블 구조나 데이터 흐름을 더 명확하게 파악할 수 있게 됨.
    * **"Create 없는 Update는 없다"**는 개발의 정석을 따름.

---

## 2. 기술적 성과 (Technical Achievements)

### ✅ 복합 트랜잭션 완벽 구현 (Multi-Table Transaction)
* **구현:** `STUDY_TASK`(메인)에 먼저 데이터를 넣고, 반환된 PK(`id`)를 받아 `STUDY_TASK_CHOICE/TYPING/VOICE`(서브) 테이블에 넣는 과정을 **단일 트랜잭션**으로 묶었습니다.
* **안정성:** 중간에 에러가 발생해도 좀비 데이터(메인만 있고 상세는 없는 데이터)가 남지 않도록 원자성을 보장했습니다.

### ✅ DTO 매크로 규칙 준수 (Strict Compliance)
* **개선:** 지난 Phase 6-18, 6-19에서 겪었던 `FromRow`, `ToSchema` 누락 이슈를 방지하기 위해 프롬프트에 강제 조항을 넣었습니다.
* **결과:** 컴파일러가 Trait 누락으로 불평하는 일 없이 한 번에 빌드가 성공했습니다.

### ✅ 평탄화된 DTO 처리 (Flattened DTO Handling)
* **전략:** API 요청은 하나의 JSON 객체(`Flattened`)로 받고, 서버 내부에서 `kind` 필드에 따라 데이터를 분리하여 서로 다른 테이블에 저장하는 **로직 분기(Branching)** 처리가 깔끔하게 구현되었습니다.

---

## 3. 총평 (Conclusion)

이번 단계는 **"설계 변경"과 "규칙 준수"가 얼마나 개발 효율을 높여주는지** 보여준 모범 사례였습니다.
이제 데이터 생성이 가능해졌으므로, 이 데이터를 **대량으로 생성(Bulk Create)**하거나, 아까 미뤄두었던 **수정(Update)** 기능을 구현할 탄탄한 기반이 마련되었습니다.