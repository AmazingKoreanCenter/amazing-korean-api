# 📝 Phase 6-15 Admin Create Study - Issue & Troubleshooting Log

## 1. 성공적인 구현 포인트 (Success Points)

### ✅ 트랜잭션 원자성 보장 (Atomic Transaction)
* **구현:** `STUDY` 테이블에 데이터를 넣는 작업과 `ADMIN_STUDY_LOG`에 이력을 남기는 작업을 **하나의 트랜잭션(`tx`)**으로 묶었습니다.
* **결과:** 스터디 생성 중에 에러가 나면 로그도 남지 않고, 로그 저장 중에 에러가 나면 스터디 생성도 롤백되는 **데이터 무결성**을 확보했습니다.

### ✅ 타입 안전성 강화 (Type Safety)
* **개선:** 지난 Phase 6-14의 교훈을 바탕으로, `IpAddr` 변환과 `Enum` 타입 처리를 서비스 레이어에서 미리 완벽하게 처리하고 리포지토리로 넘겼습니다. 덕분에 컴파일러와의 싸움 없이 로직이 매끄럽게 연결되었습니다.

---

## 2. 발생한 이슈 및 해결 (Issues & Resolutions)

### 🔴 이슈 1: 매크로 내 문자열 이스케이프 오류 (Syntax Error)
* **현상:** `handler.rs`의 `#[utoipa::path(...)]` 매크로 내부에서 `security((\"bearerAuth\" ...))`와 같이 불필요한 백슬래시(`\`)가 포함되어 컴파일 에러 발생.
* **원인:** AI(Codex)가 코드를 생성하는 과정에서, 문자열 리터럴을 처리하는 내부 로직이 매크로 속성 구문에 잘못 적용됨.
* **해결:** 백슬래시를 제거하고 `security(("bearerAuth" = []))`로 수정하여 문법 오류 해결.

### ⚠️ 이슈 2: 포트 충돌 (Port Conflict / OS Error 98)
* **현상:** `Address already in use (os error 98)` 에러로 서버 실행 실패.
* **원인:** 이전 테스트 실행 후 서버 프로세스가 정상적으로 종료되지 않고 좀비 프로세스로 남아 3000번 포트를 점유하고 있었음.
* **해결:** `fuser -k 3000/tcp` 또는 `kill` 명령어로 기존 프로세스를 강제 종료하고 재실행.

---

## 3. 총평 (Conclusion)

이번 단계는 **"제대로 된 설계(로그 분리, 트랜잭션)"**가 코드의 품질을 얼마나 높여주는지 확인한 단계였습니다.
비록 매크로 문법 에러가 있었지만, 이는 로직의 결함이 아닌 단순 생성 실수였으며 빠르게 수정되었습니다.

이제 `STUDY` 테이블에 데이터가 생겼으니, 이를 **수정(Update)**하는 기능으로 넘어갈 차례입니다.