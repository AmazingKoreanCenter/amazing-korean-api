# Phase 6-24 Admin List Study Task Explains (GET /admin/studies/tasks/explain)

ROLE: Senior Rust Backend AI Assistant

OBJECTIVE:
- `GET /admin/studies/tasks/explain` 엔드포인트를 구현하여 특정 학습 문제(`task_id`)에 등록된 해설 목록을 조회합니다.
- **핵심 요구사항**: `task_id`는 필수 파라미터이며, `STUDY_TASK_EXPLAIN` 테이블을 조회하여 언어별(`explain_lang`) 해설 데이터를 반환합니다.

CONTEXT (SSOT & Rules):
1.  **테이블 구조 (Schema)**:
    - Table: `STUDY_TASK_EXPLAIN`
    - Key Columns: `study_task_id` (FK), `explain_lang` (Enum).
    - `study_task_id`를 기준으로 조회하며, 하나의 문제에 여러 언어의 해설이 존재할 수 있으므로 리스트 형태로 반환합니다.

2.  **DTO 설계 (Strict Requirement)**:
    - **모든 DTO 구조체에는 다음 매크로를 필수 적용하세요**:
      `#[derive(Debug, Deserialize, Serialize, Validate, ToSchema)]`
    - **DB 매핑용 Response 구조체(`AdminTaskExplainRes`)에는 `FromRow` 추가 필수.**
    - **Request (`TaskExplainListReq`)**:
        - `task_id`: `i32` (필수, `#[validate(range(min = 1))]`).
        - `page`: `Option<u64>` (default 1).
        - `size`: `Option<u64>` (default 20).
    - **Response (`AdminTaskExplainListRes`)**:
        - `list`: `Vec<AdminTaskExplainRes>`.
        - `total`, `page`, `size`, `total_pages`.

3.  **로직 흐름 (Service)**:
    - 1) **권한 체크**: RBAC (Admin/Manager/Hymn).
    - 2) **유효성 검사**: `req.validate()`.
    - 3) **Audit Log (중요)**: `user::repo::create_audit_log` 호출.
        - Action: `"LIST_TASK_EXPLAINS"`
        - Target Table: `Some("STUDY_TASK_EXPLAIN")` (명시 필수)
        - Target ID: `req.task_id`
        - Details: `{"page": ..., "size": ...}`
        - IP 주소: `String` -> `IpAddr` 변환 적용.
    - 4) **데이터 조회 (Repo)**:
        - `STUDY_TASK_EXPLAIN` 테이블에서 `WHERE study_task_id = ?` 조건으로 조회.
        - 페이지네이션(`LIMIT`, `OFFSET`) 적용.
        - 정렬: `explain_lang` 또는 `explain_created_at` 기준.
    - 5) **결과 반환**: 200 OK.

4.  **기술적 유의사항**:
    - **참조 구현**: `admin_list_studies` (Phase 6-15)의 페이지네이션 및 로깅 패턴을 그대로 따르세요.
    - **로그 누락 금지**: Service 함수 진입 시점에 반드시 Audit Log를 남겨야 합니다.

IMPLEMENTATION STEPS:

1.  **DTO (`src/api/admin/study/dto.rs`)**:
    - `TaskExplainListReq`, `AdminTaskExplainRes`, `AdminTaskExplainListRes` 정의.

2.  **Repo (`src/api/admin/study/repo.rs`)**:
    - `admin_list_task_explains`: `study_task_id` 필터링 및 페이징 쿼리 구현.

3.  **Service (`src/api/admin/study/service.rs`)**:
    - `admin_list_task_explains`: 로깅, 유효성 검사, 리포지토리 호출.

4.  **Handler (`src/api/admin/study/handler.rs`)**:
    - 핸들러 구현.

5.  **Router & Docs**:
    - 라우터 등록 및 문서 업데이트.

FILE PATCHES START
// src/api/admin/study/dto.rs
// src/api/admin/study/repo.rs
// src/api/admin/study/service.rs
// src/api/admin/study/handler.rs
// src/api/admin/study/router.rs
// src/docs.rs
FILE PATCHES END