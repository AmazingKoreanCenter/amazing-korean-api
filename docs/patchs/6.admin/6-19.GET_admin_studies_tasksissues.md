# 📝 Phase 6-19 Admin List Study Tasks - Issue & Troubleshooting Log

## 1. 주요 이슈 및 해결 (Critical Issue & Resolution)

### 🔴 이슈 1: `FromRow` Trait 누락
* **현상:** `admin_list_study_tasks` 리포지토리 함수에서 `build_query_as::<AdminStudyTaskRes>()` 호출 시 `trait bound not satisfied` 컴파일 에러 발생.
* **원인:** 개발자님의 피드백을 반영하여 `Debug`, `Serialize`, `ToSchema` 등은 꼼꼼히 챙겼으나, **DB 쿼리 결과를 구조체로 매핑하는 데 필수적인 `sqlx::FromRow` 매크로**를 응답 DTO에 적용하지 않음.
* **해결:** `AdminStudyTaskRes` 구조체에 `#[derive(FromRow)]`를 추가하여 해결.
* **Lesson Learned:**
    * **Request DTO**: `Deserialize`, `Validate` 필수.
    * **Response DTO (DB 연동)**: `Serialize`, `FromRow` 필수.
    * 용도에 따라 필요한 매크로가 다름을 명확히 구분해야 함.

---

## 2. 기술적 성과 (Technical Achievements)

### ✅ 복잡한 조인 쿼리 구현 (Complex SQL Joins)
* **성과:** `STUDY_TASK`를 메인으로 하고, 3개의 하위 테이블(`CHOICE`, `TYPING`, `VOICE`)을 `LEFT JOIN` 하는 로직을 `QueryBuilder`로 깔끔하게 구현했습니다.
* **데이터 정제:** 각 테이블에 흩어져 있는 질문(`..._question`) 컬럼들을 SQL 레벨(또는 매핑 단계)에서 적절히 통합하여, 클라이언트가 보기 편한 형태로 반환했습니다.

### ✅ 재사용 패턴의 안정성
* **성과:** 페이지네이션, Audit Log, RBAC 등 기존에 정립한 패턴들이 이번에도 수정 없이 그대로 적용되어 개발 속도를 높였습니다.

---

## 3. 총평 (Conclusion)

"DTO에 매크로를 다 넣자"는 전략은 유효했지만, **DB와 직접 매핑되는 DTO**에는 `FromRow`가 추가로 필요하다는 점을 다시 한번 상기하는 계기였습니다.
로직적인 난이도(조인)는 완벽하게 해결되었으므로, 이제 데이터베이스 연동에 대한 자신감이 붙었습니다.