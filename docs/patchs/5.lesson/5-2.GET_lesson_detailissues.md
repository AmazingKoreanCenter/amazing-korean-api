# 📝 Phase 5-2 회고 및 트러블슈팅 로그

이번 Phase는 이전 단계(5-1)의 시행착오를 바탕으로 **정확한 스키마 정의**가 선행되었을 때 개발 속도와 안정성이 얼마나 높아지는지 입증된 사례입니다.

## 1. 프로세스 및 협업 개선 (Process Improvements)

### ✅ 학습 효과: 스키마 선제 검증 (Schema Verification)
* **상황:** Phase 5-1에서는 테이블명(`lesson` vs `lessons`) 혼동으로 프롬프트를 수정해야 했음.
* **개선:** 이번 Phase 5-2에서는 명세서 작성 단계에서부터 `lesson`, `lesson_item` 테이블명과 컬럼 구조를 정확히 명시함.
* **결과:** Codex가 모호함 없이 코드를 작성하여 **One-Shot Success** 달성 (테이블 없음 에러 0건).

## 2. 기술적 구현 포인트 (Technical Implementation)

### ✅ Master-Detail 페이지네이션 (Sub-resource Pagination)
* **로직:** 일반적으로 상세 조회(`Detail`)는 단건 데이터를 반환하지만, 이번 요구사항은 수업 내의 **구성 요소(Items) 목록**이 포함됨.
* **구현:**
  1. **Lesson Meta 조회:** `find_lesson_by_id` (단건)
  2. **Items Pagination:** `find_items` (다건, `LIMIT/OFFSET` 적용)
  3. **결합(Aggregation):** 두 결과를 하나의 DTO(`LessonDetailRes`)로 합쳐서 응답.
* **효과:** 수업 내 아이템이 수백 개가 되어도 네트워크 페이로드와 DB 부하를 일정하게 유지 가능.

### ✅ 존재하지 않는 리소스 처리 (404 Not Found)
* **로직:**
  * `lesson_id`로 조회했을 때 결과가 `None`이면 즉시 `AppError::NotFound` 반환.
  * 아이템이 없는 경우(빈 수업)는 에러가 아니라 `items: []` 빈 배열로 200 OK 응답.
* **성과:** '없는 수업'과 '내용이 없는 수업'을 명확히 구분하는 RESTful 표준 준수.

## 3. 총평 (Conclusion)
* **진행:** 데이터 시딩(Data Seeding) 덕분에 ID 1번(존재)과 999번(미존재) 테스트 케이스가 확실하게 구분됨.
* **결과:** 페이지네이션 로직이 포함된 상세 조회 기능이 완벽하게 동작함.