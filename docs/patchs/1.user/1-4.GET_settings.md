# PATCH — Phase 1-4 Get Settings (GET /users/me/settings)

ROLE: Senior Rust Backend (Axum 0.8, SQLx 0.7+, utoipa 5) AI Assistant

OBJECTIVE:
- Phase 1-4 `GET /users/me/settings` (내 설정 조회) 엔드포인트 구현.
- `users_setting` 테이블에서 사용자의 환경설정(언어, 타임존, 알림 등)을 조회.

CONTEXT (SSOT & Rules):
- **Spec**: `docs/AMK_API_MASTER.md`의 [5.1-4] 참조.
- **Table**: `users_setting` (user_id PK, FK).
- **Enums**: `user_set_language`는 ENUM 타입이므로 `::TEXT` 캐스팅 필수.
- **DTO**: `SettingsRes` 구조체 필요.
- **Pattern**: `AuthUser` Extractor 사용.

CONTRACT (구현 명세):
- [HTTP] `GET /users/me/settings`
- [Auth] `AuthUser` 필수.
- [Logic]
  1. `users_setting` 테이블에서 `user_id`로 조회.
  2. **Defensive Coding**: 만약 DB에 설정 로우가 없다면(가입 시 누락 등), 404 에러 대신 **"기본 설정값(Default)"**을 담은 `SettingsRes`를 반환하여 프론트엔드 오류 방지.
     - *Default*: Lang='ko', Timezone='UTC', Email=false, Push=false.
- [Response]
  - **200 OK**: `SettingsRes`.

IMPLEMENTATION STEPS:
1.  **DTO (`src/api/user/dto.rs`)**:
    - `SettingsRes` 정의 (필드: `user_set_language`, `user_set_timezone`, `user_set_note_email`, `user_set_note_push`, `updated_at`).
2.  **Repo (`src/api/user/repo.rs`)**:
    - `find_settings_by_user_id` 함수 구현.
    - Query: `SELECT ... user_set_language::TEXT ... FROM users_setting ...`
3.  **Service (`src/api/user/service.rs`)**:
    - `get_my_settings` 구현.
    - Repo 조회 결과가 `None`이면 Default Struct 반환 로직 추가.
4.  **Handler (`src/api/user/handler.rs`)**:
    - `get_my_settings` 핸들러 구현.
5.  **Router (`src/api/user/router.rs`)**:
    - `/users/me/settings` 라우트 등록.

FILE PATCHES START
// src/api/user/dto.rs
// src/api/user/repo.rs
// src/api/user/service.rs
// src/api/user/handler.rs
// src/api/user/router.rs
FILE PATCHES END

# cURL SMOKE TEST
```bash
# 1. 로그인 (Token 확보)
TOKEN="<YOUR_ACCESS_TOKEN>"

# 2. 내 설정 조회
curl -v -X GET http://localhost:3000/users/me/settings \
  -H "Authorization: Bearer $TOKEN"
```